<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Implementation methods for mapper objects — bru_mapper_methods • inlabru</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Implementation methods for mapper objects — bru_mapper_methods"><meta property="og:description" content="A bru_mapper sub-class implementation must provide an
ibm_matrix() method. If the model size 'n' and definition
values 'values' are stored in the object itself, default methods are
available (see Details). Otherwise the
ibm_n() and ibm_values() methods also need to be provided."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">inlabru</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.4.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/linearapprox.html">Nonlinear model approximation</a>
    </li>
    <li>
      <a href="../articles/method.html">Iterative INLA method</a>
    </li>
    <li>
      <a href="../articles/web/1d_lgcp.html">LGCPs - An example in one dimension</a>
    </li>
    <li>
      <a href="../articles/web/2d_lgcp.html">LGCPs - An example in two dimensions</a>
    </li>
    <li>
      <a href="../articles/web/2d_lgcp_covars.html">LGCPs - Spatial covariates</a>
    </li>
    <li>
      <a href="../articles/web/2d_lgcp_distancesampling.html">LGCPs - Distance sampling</a>
    </li>
    <li>
      <a href="../articles/web/2d_lgcp_multilikelihood.html">LGCPs - Multiple Likelihoods</a>
    </li>
    <li>
      <a href="../articles/web/2d_lgcp_plotsampling.html">LGCPs - Plot sampling</a>
    </li>
    <li>
      <a href="../articles/web/2d_lgcp_spatiotemporal.html">LGCPs - An example in space and time</a>
    </li>
    <li>
      <a href="../articles/web/publications.html">Publications</a>
    </li>
    <li>
      <a href="../articles/web/random_fields.html">Random Fields in One Dimension</a>
    </li>
    <li>
      <a href="../articles/web/random_fields_2d.html">Random Fields in 2D</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/inlabru-org/inlabru/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Implementation methods for mapper objects</h1>
    <small class="dont-index">Source: <a href="https://github.com/inlabru-org/inlabru/blob/HEAD/R/effect.R" class="external-link"><code>R/effect.R</code></a></small>
    <div class="hidden name"><code>bru_mapper_methods.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A <code>bru_mapper</code> sub-class implementation must provide an
<code>ibm_matrix()</code> method. If the model size 'n' and definition
values 'values' are stored in the object itself, default methods are
available (see Details). Otherwise the
<code><a href="bru_mapper.html">ibm_n()</a></code> and <code><a href="bru_mapper.html">ibm_values()</a></code> methods also need to be provided.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre><code># S3 method for default
ibm_n(mapper, inla_f = FALSE, ...)

# S3 method for default
ibm_values(mapper, inla_f = FALSE, ...)

# S3 method for default
ibm_amatrix(mapper, input, inla_f = FALSE, ...)

# S3 method for default
ibm_valid_input(mapper, input, ...)

# S3 method for bru_mapper_inla_mesh_2d
ibm_n(mapper, ...)

# S3 method for bru_mapper_inla_mesh_2d
ibm_values(mapper, ...)

# S3 method for bru_mapper_inla_mesh_2d
ibm_amatrix(mapper, input, ...)

# S3 method for bru_mapper_inla_mesh_1d
ibm_n(mapper, ...)

# S3 method for bru_mapper_inla_mesh_1d
ibm_values(mapper, ...)

# S3 method for bru_mapper_inla_mesh_1d
ibm_amatrix(mapper, input, ...)

# S3 method for bru_mapper_index
ibm_valid_input(mapper, input, ...)

# S3 method for bru_mapper_index
ibm_amatrix(mapper, input, ...)

# S3 method for bru_mapper_linear
ibm_n(mapper, ...)

# S3 method for bru_mapper_linear
ibm_values(mapper, ...)

# S3 method for bru_mapper_linear
ibm_amatrix(mapper, input, ...)

# S3 method for bru_mapper_factor
ibm_n(mapper, ...)

# S3 method for bru_mapper_factor
ibm_values(mapper, ...)

# S3 method for bru_mapper_factor
ibm_amatrix(mapper, input, ...)

# S3 method for bru_mapper_offset
ibm_n(mapper, ...)

# S3 method for bru_mapper_offset
ibm_values(mapper, ...)

# S3 method for bru_mapper_offset
ibm_amatrix(mapper, input, ...)

# S3 method for bru_mapper_multi
ibm_n(mapper, inla_f = FALSE, multi = 0L, ...)

# S3 method for bru_mapper_multi
ibm_values(mapper, inla_f = FALSE, multi = 0L, ...)

# S3 method for bru_mapper_multi
ibm_amatrix(mapper, input, inla_f = FALSE, multi = 0L, ...)

# S3 method for bru_mapper_multi
ibm_valid_input(mapper, input, inla_f = FALSE, multi = 0L, ...)

# S3 method for bru_mapper_multi
[(x, i, drop = TRUE)

# S3 method for bru_mapper_multi
names(x)

# S3 method for bru_mapper_multi
names(x) &lt;- value

# S3 method for bru_mapper_collect
ibm_n(mapper, inla_f = FALSE, multi = 0L, ...)

# S3 method for bru_mapper_collect
ibm_values(mapper, inla_f = FALSE, multi = 0L, ...)

# S3 method for bru_mapper_collect
ibm_amatrix(mapper, input, inla_f = FALSE, multi = 0L, ...)

# S3 method for bru_mapper_collect
ibm_valid_input(mapper, input, inla_f = FALSE, multi = 0L, ...)

# S3 method for bru_mapper_collect
[(x, i, drop = TRUE)

# S3 method for bru_mapper_collect
names(x)

# S3 method for bru_mapper_collect
names(x) &lt;- value</code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>mapper</dt>
<dd><p>A mapper S3 object, normally inheriting from <code>bru_mapper</code></p></dd>
<dt>inla_f</dt>
<dd><p>logical; when <code>TRUE</code> in <code>ibm_n</code> and <code>ibm_values</code>, these must result in values compatible with <code>INLA::f(...)</code>
an specification and corresponding <code>INLA::inla.stack(...)</code> constructions.
For <code>ibm_amatrix</code> methods, it may influence how the input data is interpreted.
Implementations do not normally need to do anything different, except
for mappers of the type needed for hidden multicomponent models such
as "bym2", which can be handled by <code>bru_mapper_collect</code>.</p></dd>
<dt>...</dt>
<dd><p>Arguments passed on to other methods</p></dd>
<dt>input</dt>
<dd><p>The values for which to produce a mapping matrix</p></dd>
<dt>multi</dt>
<dd><p>integer or logical;
If positive, the number of levels to recurse in a <code>bru_collect_mapper</code>.
If <code>TRUE</code>, equivalent to <code>1L</code>. If <code>FALSE</code>, equivalent to <code>0L</code>.</p></dd>
<dt>x</dt>
<dd><p>object from which to extract element(s)</p></dd>
<dt>i</dt>
<dd><p>indices specifying element(s) to extract</p></dd>
<dt>drop</dt>
<dd><p>logical;
For <code>[.bru_mapper_collect</code>, whether to extract an individual mapper when
<code>i</code> identifies a single element. If <code>FALSE</code>, a list of sub-mappers is
returned (suitable e.g. for creating a new <code>bru_mapper_collect</code> object).
Default: <code>TRUE</code></p></dd>
<dt>value</dt>
<dd><p>a character vector of up to the same length as x</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <ul><li><p><code>[</code>-indexing a <code>bru_mapper_multi</code> extracts a subset
<code>bru_mapper_multi</code> object (for drop <code>FALSE</code>) or an individual sub-mapper
(for drop <code>TRUE</code>, and <code>i</code> identifies a single element)</p></li>
</ul><ul><li><p>The <code><a href="https://rdrr.io/r/base/names.html" class="external-link">names()</a></code> method for <code>bru_mapper_multi</code> returns the names from the
sub-mappers list</p></li>
</ul><ul><li><p><code>[</code>-indexing a <code>bru_mapper_collect</code> extracts a subset
<code>bru_mapper_collect</code> object (for drop <code>FALSE</code>) or an individual sub-mapper
(for drop <code>TRUE</code>, and <code>i</code> identifies a single element)</p></li>
</ul><ul><li><p>The <code><a href="https://rdrr.io/r/base/names.html" class="external-link">names()</a></code> method for <code>bru_mapper_collect</code> returns the names from the
sub-mappers list</p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    
<ul><li><p>The default <code><a href="bru_mapper.html">ibm_n()</a></code> method returns a non-null element 'n' from the
mapper object, and gives an error if it doesn't exist. If <code>inla_f=TRUE</code>,
first checks for a 'n_inla' element.</p></li>
</ul><ul><li><p>The default <code><a href="bru_mapper.html">ibm_values()</a></code> method returns a non-null element
'values' from the mapper object, and <code>seq_len(ibm_n(mapper))</code> if
it doesn't exist.</p></li>
</ul><ul><li><p>The default <code><a href="bru_mapper.html">ibm_amatrix()</a></code> gives an error message.
Mapper classes must implement their own <code>ibm_amatrix</code> method.</p></li>
</ul><ul><li><p>The default <code><a href="bru_mapper.html">ibm_valid_input()</a></code> method returns an all-TRUE logical vector.</p></li>
</ul><ul><li><p><code>ibm_amatrix</code> for <code>bru_mapper_multi</code> accepts a list with
named entries, or a list with unnamed but ordered elements.
The names must match the sub-mappers, see <code>names.bru_mapper_multi()</code>.
Each list element should take a format accepted by the corresponding
sub-mapper. In case each element is a vector, the input can be given as a
data.frame with named columns, a matrix with named columns, or a matrix
with unnamed but ordered columns.</p></li>
</ul><ul><li><p><code>ibm_valid_input</code> for <code>bru_mapper_multi</code> accepts a list with
named entries, or a list with unnamed but ordered elements.
The names must match the sub-mappers, see <code>names.bru_mapper_multi()</code>.
Each list element should take a format accepted by the corresponding
sub-mapper. In case each element is a vector, the input can be given as a
data.frame with named columns, a matrix with named columns, or a matrix
with unnamed but ordered columns.</p></li>
</ul><ul><li><p><code>ibm_amatrix</code> for <code>bru_mapper_collect</code> accepts a list with
named entries, or a list with unnamed but ordered elements.
The names must match the sub-mappers, see <code>names.bru_mapper_collect()</code>.
Each list element should take a format accepted by the corresponding
sub-mapper. In case each element is a vector, the input can be given as a
data.frame with named columns, a matrix with named columns, or a matrix
with unnamed but ordered columns. When <code>inla_f=TRUE</code> and <code>hidden=TRUE</code> in
the mapper definition, the input format should instead match that of
the first, non-hidden, sub-mapper.</p></li>
</ul><ul><li><p><code>ibm_valid_input</code> for <code>bru_mapper_collect</code> accepts a list with
named entries, or a list with unnamed but ordered elements.
The names must match the sub-mappers, see <code>names.bru_mapper_collect()</code>.
Each list element should take a format accepted by the corresponding
sub-mapper. In case each element is a vector, the input can be given as a
data.frame with named columns, a matrix with named columns, or a matrix
with unnamed but ordered columns.</p></li>
</ul></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="bru_mapper.html">bru_mapper()</a></code></p></div>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Finn Lindgren, Fabian E. Bachl.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

